


<script>
	(function(customElements){

		class ContactChip extends HTMLElement {
			
			constructor(){
				super();
				const shadowRoot = this.attachShadow({mode:'open'});
				const tplChip = document.currentScript.ownerDocument.querySelector('template#chipComponent');
				shadowRoot.appendChild(tplChip.content,true)

			}

			//setters and getters

			// get chipSrc (){
			// 	return this.getAttribute('chip-src');
			// }

			// set chipSrc(val){

			// 	if(val){
			// 		this.setAttribute('chip-src',val);
			// 	}
			// 	else {
			// 		this.setAttribute('chip-src',
			// 			'assets/img/default.jpg');
			// 	}

			// }

			// get chipText (){
			// 	return this.getAttribute('chip-text');
			// }

			// set chipText(val){

			// 	if(val){
			// 		this.setAttribute('chip-text',val);
			// 	}
			// 	else {
			// 		this.setAttribute('chip-text',
			// 			'desconocido');
			// 	}

			// }

			// get chipId (){
			// 	return number(this.getAttribute('chip-id'));
			// }

			// set chipId(val){

			// 	if(val){
			// 		this.setAttribute('chip-id',val);
			// 	}
			// 	else {
			// 		this.setAttribute('chip-id',
			// 			0);
			// 	}

			// }			

			_sayHi(index,contacts){
				console.log(index,contacts,document);
				const el = contacts[index];

				let name = document.body.querySelector('span.infoName');
				let age = document.querySelector('span.infoAge');
				let email = document.querySelector('span.infoEmail');

				name.innerHTML = el.name;
				age.innerHTML = el.age;
				email.innerHTML = el.email;
				console.log(name);


			}

			connectedCallback() {

				const contacts = [
					{	id:0,
						image:"assets/img/1.jpg",
						name:'Chiki baby 1',
						phone:'7352319309',
						age:25,
						bio:'Soy bien pro haciendo web components'
					},

					{	id:1,
						image:"assets/img/1.jpg",
						name:'chiki baby 2',
						phone:'7352319309',
						age:25,
						bio:'Soy bien pro haciendo web components'
					},

					{	id:2,
						image:"assets/img/1.jpg",
						name:'chiki baby 3',
						phone:'7352319309',
						age:25,
						bio:'Soy bien pro haciendo web components'
					},

					{	id:3,
						image:"assets/img/1.jpg",
						name:'Chiki baby 4',
						phone:'7352319309',
						age:25,
						bio:'Soy bien pro haciendo web components'
					}					
				]

				let container = this.shadowRoot.querySelector('.containerChip');



				for (let contact of contacts){
					let chip = document.createElement('div')
					chip.classList.add('chip')
					let img = document.createElement('img');
					img.src = contact.image;
					img.alt = contact.name;
					img.classList.add('chipImage')
					chip.setAttribute('data-index',contact.id);
					let span = document.createElement('span');
					span.classList.add('chipName');
					span.innerHTML = contact.name;

					chip.appendChild(img);
					chip.appendChild(span);

					chip.addEventListener('click',()=>{
						this._sayHi(contact.id,contacts);
					});



					container.appendChild(chip);
				}
				// this.chipText = this.chipText;
				// this.chipSrc = this.chipSrc;

				// const container = this.shadowRoot.querySelector('.chip');
				
				// const img = this.shadowRoot.querySelector('.chipImage');
				// img.src = this.chipSrc;

				// const span = this.shadowRoot.querySelector('.chipName');
				// span.innerHTML = this.chipText;

				// container.addEventListener('click',this._sayHi.bind(this));


			}		


		}

		customElements.define('contact-chip',ContactChip);

	})(window.customElements);
</script>